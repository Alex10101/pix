(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(47),c=a(106),l=a(104),o=a(107),s=a(105),u=a(48),p=a.n(u),d=a(12),m=a(13),g=a(17),f=a(14),h=a(18),b=a(16),v=a(10),y=a.n(v),E=a(22),w=a(23),O=a.n(w);var k=function e(t,a){return function(){var n=Object(E.a)(y.a.mark(function n(r){var i;return y.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O.a.get("".concat("","/articles"),{params:{page:t,limit:a}});case 2:i=n.sent,r({type:e,payload:i.data});case 4:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},j=function e(t,a){return function(){var n=Object(E.a)(y.a.mark(function n(r){var i;return y.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O.a.get("".concat("","/article"),{params:{page:t,limit:a}});case 2:return i=n.sent,r({type:e,payload:i.data}),n.abrupt("return",i.data);case 5:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},x=function e(t){return function(){var a=Object(E.a)(y.a.mark(function a(n){var r,i;return y.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r={headers:{"Content-Type":"application/json"},title:t.title,body:t.body},a.next=3,O.a.post("".concat("","/articles"),r);case 3:i=a.sent,n({type:e,payload:i.data.created});case 5:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()},N=function e(t,a,n){return function(){var r=Object(E.a)(y.a.mark(function r(i){var c,l;return y.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return c={headers:{"Content-Type":"application/json"},title:t.title,body:t.body},r.next=3,O.a.put("".concat("","/articles/").concat(a),c);case 3:return l=r.sent,i({type:e,payload:{data:l.data.updated_to,index:n}}),r.abrupt("return",l.data.updated_to);case 6:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()},_=function e(t,a){return function(){var n=Object(E.a)(y.a.mark(function n(r){return y.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O.a.put("".concat("","/articles"),{id:t});case 2:n.sent,r({type:e,payload:{id:t,index:a}});case 4:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},P=function e(t,a){return{type:e,payload:{article:t,index:a}}},C=function e(t,a,n){return n&&(t.editable=!1),a&&(t.index=a),{type:e,payload:t}},A=a(103),D=function(e){return r.a.createElement("button",e,e.children)},T=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={visiblePages:a.getVisiblePages(null,a.props.pages)},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.pages!==e.pages&&this.setState({visiblePages:this.getVisiblePages(null,e.pages)}),this.changePage(e.page+1)}},{key:"filterPages",value:function(e,t){return e.filter(function(e){return e<=t})}},{key:"getVisiblePages",value:function(e,t){return t<7?this.filterPages([1,2,3,4,5,6],t):e%5>=0&&e>4&&e+2<t?[1,e-1,e,e+1,t]:e%5>=0&&e>4&&e+2>=t?[1,t-3,t-2,t-1,t]:[1,2,3,4,5]}},{key:"changePage",value:function(e){if(e!==this.props.page+1){var t=this.getVisiblePages(e,this.props.pages);this.setState({visiblePages:this.filterPages(t,this.props.pages)}),this.props.onPageChange(e-1)}}},{key:"render",value:function(){var e=this,t=this.props.PageButtonComponent,a=void 0===t?D:t,n=this.state.visiblePages,i=this.props.page+1;return r.a.createElement("div",{className:"Table__pagination"},r.a.createElement("div",{className:"Table__prevPageWrapper"},r.a.createElement(a,{className:"Table__pageButton",onClick:function(){1!==i&&e.changePage(i-1)},disabled:1===i})),r.a.createElement("div",{className:"Table__visiblePagesWrapper"},n.map(function(t,c,l){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(a,{key:t,className:i===t?"Table__pageButton Table__pageButton--active":"Table__pageButton",onClick:e.changePage.bind(e,t)},l[c-1]+2<t?"...".concat(t):t),r.a.createElement("div",{key:t+"div",className:"Table__pageButton__Line"},c===n.length-1?"":"|"))})),r.a.createElement("div",{className:"Table__nextPageWrapper"},r.a.createElement(a,{className:"Table__pageButton",onClick:function(){i!==e.props.pages&&e.changePage(i+1)},disabled:i===this.props.pages})))}}]),t}(n.Component),L=(a(88),a(54)),S=a(108),W=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={page:a.handleURL("page")||0,limit:a.handleURL("limit")||4,loading:!0},a.addData=function(){var e=a.countPages(),t=a.state.page+1,n=a.props.articles;console.log(n),e<t||e===t||(0!==a.state.page?a.props.getArticle(t,a.state.limit):a.props.getArticle(1,1))},a.fetchData=function(e){a.setState({loading:!0}),a.props.getArticles(e.page,e.defaultPageSize).then(function(t){a.props.history.push("?page=".concat(e.page))})},a.sliceData=function(){return a.props.articles.articles?a.state.limit<a.props.articles.articles.length?a.props.articles.articles.slice(0,a.state.limit):a.props.articles.articles:[]},a.countPages=function(){return Math.ceil(a.props.articles.count/a.state.limit)||0},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){!0===e.articles.refresh&&this.addData(),this.state.loading&&this.setState({loading:!1})}},{key:"handleURL",value:function(e){var t=new URLSearchParams(window.location.search).get(e);if(!1!==t){var a=Number(t);return a>0?a-1:a}return!1}},{key:"render",value:function(){var e=this,t=this.state,a=t.page,n=t.loading,i=t.limit,c=this.props,l=c.setEditable,o=c.setDisplaying,s=c.articles,u=this.fetchData,p=this.sliceData,d=this.countPages;return r.a.createElement(L.a,{manual:!0,defaultPage:a,defaultPageSize:i,onFetchData:u,page:this.state.page,onPageChange:function(t){return e.setState({page:t})},loading:n,PaginationComponent:T,pages:d(),className:"-striped -highlight",NoDataComponent:function(){return r.a.createElement("p",null)},data:p(),sortable:!1,resizable:!1,columns:[{Header:"Id",accessor:"_id"},{Header:"Title",accessor:"title"},{Header:"Body",accessor:"body"},{Header:void 0,Cell:function(e){return 0===s.page&&e.index<s.rcount?r.a.createElement("button",{style:{marginLeft:"65px"},className:"btn btn-light table-row-button",onClick:function(){return o(e.original,e.index,!0)}},"View"):r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{to:{pathname:"/articles/".concat(e.original._id,"/edit")}},r.a.createElement("button",{className:"btn btn-light table-row-button",onClick:function(){return l(e.original,e.index)}},"Edit")),r.a.createElement("button",{className:"btn btn-light table-row-button",onClick:function(){return o(e.original,e.index,!1)}},"View"))}}]})}}]),t}(n.Component);var B=Object(S.a)(Object(b.b)(function(e){return{articles:e.articles}},{getArticles:k,setEditable:P,setDisplaying:C,getArticle:j})(W)),V=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={display:!0},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.handleDisplay()}},{key:"shouldComponentUpdate",value:function(e,t){return this.handleDisplay(),!0}},{key:"handleDisplay",value:function(){var e=window.location.pathname,t=e.indexOf("/edit")>-1,a=e.indexOf("/create")>-1;return t||a||this.state.display?!(!t&&!a)&&(!0===this.state.display&&this.setState({display:!1}),!0):(this.setState({display:!0}),!0)}},{key:"render",value:function(){return r.a.createElement("div",{className:"main-table",style:{display:this.state.display?"flex":"none"}},r.a.createElement(B,null))}}]),t}(r.a.Component),R=function(e){function t(){return Object(d.a)(this,t),Object(g.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"nf"},"404")}}]),t}(r.a.Component),U=a(51),F=a.n(U);var H=Object(b.b)(function(e){return{data:e.edit}},{editArticle:N,postArticle:x,deleteArticle:_})(function(e){var t=e.history,a=e.data,n=e.editArticle,i=e.postArticle,c=e.deleteArticle,l=t.location.pathname.indexOf("create")>-1;if(!l&&!1===a)return t.push("/articles"),"";var o={button:"Create",send:i,article:{title:"",body:""}},s={button:"Edit",send:n,article:a.article,deleteArticle:c},u=l?o:s;return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{className:"form-edit",onSubmit:function(e){e.preventDefault();var n={title:e.currentTarget.title.value,body:e.currentTarget.body.value};u.send(n,u.article._id,a.index).then(function(e){t.push("/articles")})}},r.a.createElement("div",{className:"form-edit-form"},r.a.createElement("input",{required:!0,type:"text",name:"title",maxLength:"25",defaultValue:u.article.title}),r.a.createElement("textarea",{required:!0,name:"body",cols:"30",placeholder:"Article body ...",maxLength:"50",rows:"10",defaultValue:u.article.body}),r.a.createElement("div",{className:"form-buttons"},r.a.createElement("button",{type:"submit",className:"btn btn-light table-row-button"},u.button),r.a.createElement(A.a,{to:"/articles"},r.a.createElement("button",{className:"btn btn-light table-row-button"},"Cancel"))))),u.deleteArticle&&r.a.createElement("button",{className:"btn btn-light delete",onClick:function(){u.deleteArticle(u.article._id,a.index),t.push("/articles")}},"Delete"))}),M=(a(101),function(){return r.a.createElement("div",{className:"container-header"},r.a.createElement("div",{className:"header-main"},"Articles ",function(){var e=window.location.pathname,t=e.lastIndexOf("/");switch(e=e.substring(t+1)){case"edit":return"/ edit";case"create":return"/ create";default:return r.a.createElement(A.a,{to:"/articles/create"},r.a.createElement("button",{className:"btn btn-light table-row-button header-button"},"Create"))}}()))});var z=Object(b.b)(function(e){return{article:e.display}},{setDisplaying:C,deleteArticle:_})(function(e){var t=e.article,a=e.setDisplaying,n=e.deleteArticle;window.addEventListener("click",function e(t){var a=t.target.className.indexOf("popup")>-1,n="View"===t.target.innerHTML;a||n||!t.target.parentNode||-1===t.target.parentNode.className.indexOf("popup")&&(i(),window.removeEventListener("click",e))});var i=function(){a(!1)};return t?r.a.createElement("div",{className:"popup-container"},r.a.createElement("div",{className:"popup-title"},t.title,r.a.createElement("span",{onClick:i})),r.a.createElement("div",{className:"popup-body"},t.body),r.a.createElement("div",{className:"popup-time"},r.a.createElement("p",{className:"popup-p"},"Created : ",r.a.createElement("span",null,t.created_at)),r.a.createElement("p",{className:"popup-p"},"Updated : ",r.a.createElement("span",null,t.updated_at||"Null"))),void 0===t.editable&&r.a.createElement("button",{className:"btn btn-light delete",onClick:function(){n(t._id,t.index),i()}},"Delete")):""}),I=p()(),q=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container main"},r.a.createElement(c.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(M,null),r.a.createElement(z,null),r.a.createElement(l.a,{path:"/articles/:id/edit",exact:!0,render:function(e){return r.a.createElement(H,e)}}),r.a.createElement(l.a,{path:"/articles/create",exact:!0,render:function(e){return r.a.createElement(H,e)}}),r.a.createElement(o.a,null,r.a.createElement(l.a,{exact:!0,path:"/",render:function(){return r.a.createElement(s.a,{to:"/articles?page=1"})}}),r.a.createElement(l.a,{path:"/articles:page?",component:V,history:I}),r.a.createElement(l.a,{component:R}))))))},J=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Q(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var $=a(15),G=a(24),K="",X="",Y=Object($.combineReducers)({articles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return t.payload||!1;case j:return K=Object(G.a)({},e),t.payload.length?(K.articles.push(t.payload[0]),K.refresh=!1,K||!1):K;case x:return(K=Object(G.a)({},e)).articles.push(t.payload),K.count+=1,K;case N:return X=t.payload.index,(K=Object(G.a)({},e)).articles[X]=t.payload.data,K;case _:return(K=Object(G.a)({},e)).refresh=!0,K.count+=-1,K.articles.splice([t.payload.index],1),console.log(K.count),K;default:return e}},edit:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return t.payload||!1;default:return e}},display:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return(!e||e._id!==t.payload._id)&&(t.payload||!1);default:return e}}}),Z=a(52),ee=a(53),te=Object(ee.composeWithDevTools)(Object($.applyMiddleware)(Z.a))($.createStore)(Y);Object(i.render)(r.a.createElement(b.a,{store:te},r.a.createElement(q,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");J?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Q(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Q(e)})}}()},55:function(e,t,a){e.exports=a(102)}},[[55,1,2]]]);
//# sourceMappingURL=main.0431c479.chunk.js.map